<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="./_js/phaser.min.js"></script>
    <script src="./_js/home.js"></script>
    <script src="./_js/normal.js"></script>
    <script src="./_js/pause.js"></script>
    <script src="./_js/scene1.js"></script>
    <script src="./_js/scene2.js"></script>
    <title>防疫新運動</title>
  </head>

  <body>
    <script>
      function preload() {
        /*音效*/
        this.load.audio("sceneBGM", "./audio/normalBGM.mp3");
        this.load.audio("adbtnclick", "./audio/btn_click.mp3");
        this.load.audio("adbtnhover", "./audio/btnhover.mp3");
        this.load.audio("jump", "./audio/jump.mp3");
        this.load.audio("mobsbehit", "./audio/mobshitted.mp3");
        this.load.audio("pick", "./audio/pick.mp3");
        this.load.audio("playermask", "./audio/playermask.mp3");
        this.load.audio("loseBGM", "./audio/loseBGM.mp3");
        this.load.audio("winBGM", "./audio/winBGM.mp3");
        this.load.audio("playerbehit", "./audio/playerhurted.mp3");
        this.load.audio("heal", "./audio/heal.mp3");
        this.load.audio("Pbonus", "./audio/Pbonus.mp3");
        this.load.audio("Nbonus", "./audio/Nbonus.mp3");
        this.load.audio("round", "./audio/round.mp3");
        this.load.audio("warn", "./audio/warn.mp3");
        this.load.audio("count", "./audio/count.mp3");
        this.load.audio("bigboss", "./audio/bigboss.mp3");
        this.load.audio("smallboss", "./audio/smallboss.mp3");
        /*場景*/
        this.load.image("bg", "./_img/bgDaylight.PNG");
        this.load.image("bg1", "./_img/bgDaylight1.PNG");
        this.load.image("bg2", "./_img/bgDaylight2.PNG");
        this.load.image("bg3", "./_img/bgDaylight3.PNG");
        this.load.image("sbg", "./_img/bgSunset.PNG");
        this.load.image("sbg1", "./_img/bgSunset1.PNG");
        this.load.image("sbg2", "./_img/bgSunset2.PNG");
        this.load.image("sbg3", "./_img/bgSunset3.PNG");
        this.load.image("ground", "./_img/ground.png");
        this.load.image("platforms", "./_img/platform.png");
        this.load.image("btnStart", "./_img/button.jpg");
        this.load.image("paddle", "./_img/paddle.png");
        this.load.image("round1", "./_img/round1.PNG");
        this.load.image("round2", "./_img/round2.PNG");
        this.load.image("boss1", "./_img/boss1.PNG");
        this.load.image("boss2", "./_img/boss2.PNG");
        this.load.image("boss1bg", "./_img/bgDaylight.PNG");
        this.load.image("boss2bg", "./_img/bgNight.png");
        /*障礙*/
        this.load.spritesheet("cones", "./_img/cones.PNG", {
          frameWidth: 138,
          frameHeight: 165,
        });
        this.load.spritesheet("car", "./_img/car.PNG", {
          frameWidth: 280,
          frameHeight: 236,
        });
        this.load.image("hole", "./_img/hole.PNG");
        this.load.image("holebg", "./_img/holebg.PNG");
        this.load.spritesheet("bird", "./_img/bird.PNG", {
          frameWidth: 135,
          frameHeight: 145,
        });
        this.load.spritesheet("land1", "./_img/land1.png", {
          frameWidth: 217,
          frameHeight: 231,
        });
        this.load.spritesheet("land2", "./_img/land2.png", {
          frameWidth: 217,
          frameHeight: 231,
        });
        /*掉落物*/
        this.load.image("drop", "./_img/drop.PNG");
        this.load.image("mask", "./_img/mask.PNG");
        this.load.image("randombox", "./_img/randombox.png");
        this.load.image("gasmask", "./_img/gasmask.png");
        this.load.image("dropB", "./_img/alcoholBullet.png");
        this.load.image("mobsBullet", "./_img/mobsBullet.png");
        this.load.image("rain", "./_img/rain.png");
        this.load.image("heart", "./_img/heart.png");
        /*道具*/
        this.load.image("alcohol1", "./_img/alcohol1.PNG");
        this.load.image("alcohol2", "./_img/alcohol2.PNG");
        this.load.image("alcohol3", "./_img/alcohol3.PNG");
        this.load.image("pBonus1", "./_img/Bonus_Positive1.PNG");
        this.load.image("pBonus2", "./_img/Bonus_Positive2.PNG");
        this.load.image("nBonus1", "./_img/Bonus_Negative1.PNG");
        this.load.image("nBonus2", "./_img/Bonus_Negative2.PNG");
        this.load.image("alcoB", "./_img/alcoholBullet.png");
        /*人物*/
        this.load.spritesheet("player", "./_img/player.png", {
          frameWidth: 129,
          frameHeight: 200,
        });
        this.load.spritesheet("mobs1", "./_img/mobs1.PNG", {
          frameWidth: 141,
          frameHeight: 221,
        });
        this.load.spritesheet("mobs2", "./_img/mobs2.PNG", {
          frameWidth: 166,
          frameHeight: 220,
        });
        this.load.spritesheet("mobs3", "./_img/mobs3.PNG", {
          frameWidth: 133,
          frameHeight: 221,
        });
        this.load.spritesheet("player1", "./_img/player1.png", {
          frameWidth: 129,
          frameHeight: 200,
        });
        this.load.spritesheet("player2", "./_img/player2.png", {
          frameWidth: 129,
          frameHeight: 200,
        });
        this.load.spritesheet("player3", "./_img/player3.png", {
          frameWidth: 129,
          frameHeight: 200,
        });
        this.load.image("bossP", "./_img/bossP.png");
        this.load.image("bossG", "./_img/bossG.png");
        /*UI*/
        this.load.image("itembox", "./_img/itembox.PNG");
        this.load.image("bloodbox", "./_img/livebox.PNG");
        this.load.spritesheet("lives", "./_img/lives.PNG", {
          frameWidth: 470,
          frameHeight: 75,
        });
        this.load.image("menubg", "./_img/BGMenu.PNG");
        this.load.image("pausebg", "./_img/BGPaused.PNG");
        this.load.image("pause", "./_img/buttonpause.PNG");
        this.load.image("continue", "./_img/buttoncontinue.PNG");
        this.load.image("home", "./_img/buttonhome.PNG");
        this.load.image("restart", "./_img/buttonrestart.PNG");
        this.load.image("clock", "./_img/clockbox.PNG");
        this.load.image("title", "./_img/title.PNG");
        this.load.spritesheet("Boss1Lives", "./_img/Boss1Lives.png", {
          frameWidth: 470,
          frameHeight: 75,
        });
        this.load.spritesheet("Boss2Lives", "./_img/Boss2Lives.png", {
          frameWidth: 470,
          frameHeight: 75,
        });
        /*病毒*/
        this.load.image("bossP", "./_img/bossP.PNG");
        this.load.image("bossG", "./_img/bossG.PNG");
        this.load.image("Poisonrain", "./_img/rain.PNG");

        /*地雷*/
        this.load.spritesheet("land1", "./_img/land1.PNG", {
          frameWidth: 217,
          frameHeight: 231,
        });
        this.load.spritesheet("land2", "./_img/land1.PNG", {
          frameWidth: 217,
          frameHeight: 231,
        });
        this.load.spritesheet("bomb1", "./_img/land1.PNG", {
          frameWidth: 217,
          frameHeight: 231,
        });
        this.load.spritesheet("bomb2", "./_img/land1.PNG", {
          frameWidth: 217,
          frameHeight: 231,
        });

        /*血條*/
        this.load.spritesheet("Boss1Lives", "./_img/Boss1Lives.png", {
          frameWidth: 470,
          frameHeight: 75,
        });
      }
      const scene1_config = {
        key: "scene1",
        active: false,
        visible: false,
        type: Phaser.AUTO,
        width: 960,
        height: 540,
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
        },
        preload: preload,
        create: function () {
          sceneBGM = this.sound.add("sceneBGM", { volume: 0.1, loop: true });
          adbtnclick = this.sound.add("adbtnclick", {
            volume: 0.5,
            loop: false,
          });
          adbtnhover = this.sound.add("adbtnhover", {
            volume: 0.1,
            loop: false,
          });
          jump = this.sound.add("jump", { volume: 0.1, loop: false });
          mobsbehit = this.sound.add("mobsbehit", { volume: 1, loop: false });
          pick = this.sound.add("pick", { volume: 1, loop: false });
          playermask = this.sound.add("playermask", { volume: 1, loop: false });
          loseBGM = this.sound.add("loseBGM", { volume: 0.1, loop: true });
          playerbehit = this.sound.add("playerbehit", {
            volume: 1,
            loop: false,
          });
          heal = this.sound.add("heal", { volume: 0.5, loop: false });
          Pbonus = this.sound.add("Pbonus", { volume: 1, loop: false });
          Nbonus = this.sound.add("Nbonus", { volume: 1, loop: false });
          round = this.sound.add("round", { volume: 0.1, loop: false });
          warn = this.sound.add("warn", { volume: 1, loop: false });
          count = this.sound.add("count", { volume: 0.5, loop: false });
          sceneBGM.play();
          isLeft = false;
          isCarLeft = true;
          isBird1Left = true;
          isBird2Left = true;
          isMobs1Left = true;
          isMobs2Left = true;
          isMobs3Left = true;
          isMaskBOut = false;
          time = 90;
          drop_num = 0;
          mask_num = 0;
          gasmask_num = 0;
          blood_num = 10;
          cursors = this.input.keyboard.createCursorKeys();
          G = this.input.keyboard.addKey("G");
          H = this.input.keyboard.addKey("H");
          this.physics.world.setBounds(0, 0, 3836, 540);
          /*背景*/
          this.add.image(0, 0, "bg").setOrigin(0, 0).setScale(0.5);
          this.add.image(959, 0, "bg1").setOrigin(0, 0).setScale(0.5);
          this.add.image(1918, 0, "bg2").setOrigin(0, 0).setScale(0.5);
          this.add.image(2877, 0, "bg3").setOrigin(0, 0).setScale(0.5);
          /*地板*/
          ground = this.physics.add.staticGroup();
          ground
            .create(-960, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(0, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(959, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(1918, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(2877, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(3836, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          /*平台*/
          platforms = this.physics.add.staticGroup();
          platforms.create(500, Phaser.Math.Between(270, 290), "platforms");
          platforms.create(950, Phaser.Math.Between(220, 240), "platforms");
          platforms.create(1700, Phaser.Math.Between(270, 290), "platforms");
          platforms.create(2700, Phaser.Math.Between(270, 290), "platforms");
          platforms.create(3150, Phaser.Math.Between(220, 240), "platforms");
          platforms.create(3600, Phaser.Math.Between(270, 290), "platforms");
          /*移動平台*/
          paddle = this.physics.add.image(2150, 350, "paddle");
          paddle.body.allowGravity = false;
          paddle.setPushable(false);
          paddle.scene.tweens.add({
            targets: paddle,
            y: 150,
            ease: "Linear",
            duration: 2000,
            repeat: -1,
            yoyo: true,
          });
          /*玩家*/
          player = this.physics.add
            .sprite(100, 100, "player")
            .setScale(0.35)
            .refreshBody();
          player.setCollideWorldBounds(true);
          /*酒精滴滴*/
          drop = this.physics.add.group();
          for (let i = 0; i < 9; i++) {
            drop
              .create(
                Phaser.Math.Between(1050, 3800),
                Phaser.Math.Between(0, 320),
                "drop"
              )
              .setScale(0.5);
          }
          /*口罩*/
          mask = this.physics.add.group();
          for (let i = 0; i < 5; i++) {
            mask
              .create(
                Phaser.Math.Between(1050, 3800),
                Phaser.Math.Between(0, 320),
                "mask"
              )
              .setScale(0.35);
          }
          maskB = this.physics.add
            .image(player.x, player.y, "mask")
            .setScale(0.3);
          maskB.body.allowGravity = false;
          maskB.setVisible(false);
          /*防毒面具*/
          gasmask = this.physics.add.group();
          gasmask
            .create(
              Phaser.Math.Between(1050, 3800),
              Phaser.Math.Between(0, 320),
              "gasmask"
            )
            .setScale(0.4);
          /*問號盒子*/
          randombox = this.physics.add.group();
          randombox.create(2150, 0, "randombox").setScale(0.45);
          bonus = [
            this.add.image(config.width / 2, 50, "pBonus1").setScale(0),
            this.add.image(config.width / 2, 50, "pBonus2").setScale(0),
            this.add.image(config.width / 2, 50, "nBonus1").setScale(0),
            this.add.image(config.width / 2, 50, "nBonus2").setScale(0),
          ];
          for (let i = 0; i < bonus.length; i++) {
            bonus[i].scrollFactorX = 0;
            bonus[i].setVisible(false);
          }
          /*障礙*/
          car = this.physics.add
            .sprite(4500, Phaser.Math.Between(0, 320), "car")
            .setScale(0.3);
          car.setPushable(false);
          holebg = this.add.group();
          holebg.create(2000, 356, "holebg").setScale(0.5);
          holebg.create(3150, 356, "holebg").setScale(0.5);
          hole = this.add.group();
          hole.create(2000, 396, "hole").setScale(0.5);
          hole.create(3150, 396, "hole").setScale(0.5);
          cones = this.physics.add.group();
          cones.create(1000, 100, "cones").setScale(0.35);
          cones.create(2700, 100, "cones").setScale(0.35);
          cones.children.iterate(function (child) {
            child.setPushable(false);
          });
          /*小怪*/
          mobs1 = this.physics.add.sprite(1475, 100, "mobs1").setScale(0.35);
          mobs2 = this.physics.add.sprite(2450, 100, "mobs2").setScale(0.35);
          mobs3 = this.physics.add.sprite(3300, 100, "mobs3").setScale(0.35);
          mobs1B = this.physics.add
            .sprite(mobs1.x, mobs1.y - 20, "mobsBullet")
            .setVisible(false)
            .setScale(0.5);
          mobs2B = this.physics.add
            .sprite(mobs2.x, mobs2.y - 20, "mobsBullet")
            .setVisible(false)
            .setScale(0.5);
          mobs3B = this.physics.add
            .sprite(mobs3.x, mobs3.y - 20, "mobsBullet")
            .setVisible(false)
            .setScale(0.5);
          mobs1B.body.allowGravity = false;
          mobs2B.body.allowGravity = false;
          mobs3B.body.allowGravity = false;
          mobs = { mobs1, mobs2, mobs3 };
          mobsB = { mobs1B, mobs2B, mobs3B };
          /*相機*/
          let camera = this.cameras.main;
          camera.setBounds(0, 0, 3836, 540);
          camera.startFollow(player);
          /*UI*/
          isStart = true;
          car.anims.play("car", true);
          car.setVelocityX(-200);

          this.time.addEvent({
            loop: true,
            delay: 1000,
            callback: showTime,
            callbackScope: this,
          });
          this.time.addEvent({
            loop: true,
            delay: 30000,
            callback: newItem,
            callbackScope: this,
          });
          this.time.addEvent({
            loop: true,
            delay: 2000,
            callback: mobsAttack,
            callbackScope: this,
          });
          pauseBtn = this.add
            .image(920, 500, "pause")
            .setScale(0.5)
            .setScrollFactor(0)
            .setInteractive()
            .on("pointerover", () => {
              pauseBtn.setScale(0.6);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              pauseBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              sceneBGM.pause();
              this.scene.pause("scene1");
              this.scene.launch("pause_config");
            });
          itembox = this.add
            .image(config.width / 2, 490, "itembox")
            .setScale(0.5)
            .setScrollFactor(0);
          ibH = this.add
            .text(530, 500, "H", { align: "center", fontSize: "20px" })
            .setScrollFactor(0);
          ibG = this.add
            .text(457, 500, "G", { align: "center", fontSize: "20px" })
            .setScrollFactor(0);
          ibF = this.add
            .text(383, 500, "", { align: "center", fontSize: "20px" })
            .setScrollFactor(0);
          show_drop = this.add
            .image(32, 32, "drop")
            .setScale(0.5)
            .setScrollFactor(0);
          show_mask = this.add
            .image(32, 80, "mask")
            .setScale(0.5)
            .setScrollFactor(0);
          show_dropnum = this.add
            .text(75, 16, drop_num, { align: "center", fontSize: "25px" })
            .setScrollFactor(0);
          show_masknum = this.add
            .text(75, 64, mask_num, { align: "center", fontSize: "25px" })
            .setScrollFactor(0);
          bloodbox = this.add
            .image(770, 40, "bloodbox")
            .setScale(0.5)
            .setScrollFactor(0);
          blood = this.add
            .image(770, 40, "lives", [9])
            .setScale(0.5)
            .setScrollFactor(0);
          show_bloodnum = this.add
            .text(900, 28, blood_num, {
              align: "center",
              fontSize: "25px",
              color: "rgba(255, 0, 0, 1)",
            })
            .setScrollFactor(0);
          show_gasmasknum = this.add
            .text(562, 503, gasmask_num, { align: "center", fontSize: "15px" })
            .setScrollFactor(0);
          ibshow_alcohol = this.add
            .image(405, 490, "alcohol1")
            .setScale(0.4)
            .setScrollFactor(0)
            .setTint(0x000000);
          ibshow_mask = this.add
            .image(480, 485, "mask")
            .setScale(0.4)
            .setScrollFactor(0)
            .setTint(0x000000);
          ibshow_gasmask = this.add
            .image(551, 485, "gasmask")
            .setScale(0.3)
            .setScrollFactor(0)
            .setTint(0x000000);
          clockbox = this.add
            .image(80, 490, "clock")
            .setScrollFactor(0)
            .setScale(0.6);
          show_time = this.add
            .text(75, 477, time + "s", {
              align: "center",
              fontSize: "30px",
              color: "rgba(0, 0, 0, 1)",
            })
            .setScrollFactor(0);
          boss1 = this.add
            .image(config.width / 2, config.height / 2, "boss1")
            .setScale(0.5)
            .setScrollFactor(0)
            .setDepth(1);
          boss1.setVisible(false);
          /*碰撞偵測*/
          this.physics.add.collider(drop, platforms);
          this.physics.add.collider(drop, ground);
          this.physics.add.collider(mask, platforms);
          this.physics.add.collider(mask, ground);
          this.physics.add.overlap(player, drop, colleDrop, null, this);
          this.physics.add.overlap(player, mask, colleMask, null, this);
          this.physics.add.overlap(player, randombox, colleBox, null, this);
          this.physics.add.overlap(player, gasmask, colleGasmask, null, this);
          this.physics.add.collider(player, platforms);
          this.physics.add.collider(player, ground);
          this.physics.add.collider(paddle, player);
          this.physics.add.collider(car, player);
          this.physics.add.collider(car, ground);
          this.physics.add.collider(randombox, paddle);
          this.physics.add.collider(cones, platforms);
          this.physics.add.collider(cones, ground);
          this.physics.add.collider(cones, player);
          this.physics.add.collider(gasmask, platforms);
          this.physics.add.collider(gasmask, ground);
          this.physics.add.collider(mobs1, ground);
          this.physics.add.collider(mobs1, platforms);
          this.physics.add.collider(mobs2, ground);
          this.physics.add.collider(mobs2, platforms);
          this.physics.add.collider(mobs3, ground);
          this.physics.add.collider(mobs3, platforms);
          this.physics.add.overlap(maskB, mobs1, maskhitMobs1, null, this);
          this.physics.add.overlap(maskB, mobs2, maskhitMobs2, null, this);
          this.physics.add.overlap(maskB, mobs3, maskhitMobs3, null, this);
          this.physics.add.overlap(player, mobs1B, hittedMobs, null, this);
          this.physics.add.overlap(player, mobs2B, hittedMobs, null, this);
          this.physics.add.overlap(player, mobs3B, hittedMobs, null, this);
          /*人物動作動畫*/
          this.anims.create({
            key: "right",
            frames: this.anims.generateFrameNumbers("player", {
              start: 4,
              end: 7,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "left",
            frames: this.anims.generateFrameNumbers("player", {
              start: 0,
              end: 3,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "turnRight",
            frames: [{ key: "player", frame: 4 }],
            frameRate: 20,
          });
          this.anims.create({
            key: "turnLeft",
            frames: [{ key: "player", frame: 3 }],
            frameRate: 20,
          });
          /*車動畫*/
          this.anims.create({
            key: "carLeft",
            frames: this.anims.generateFrameNumbers("car", {
              start: 0,
              end: 3,
            }),
            frameRate: 20,
            repeat: -1,
          });
          this.anims.create({
            key: "carRight",
            frames: this.anims.generateFrameNumbers("car", {
              start: 5,
              end: 8,
            }),
            frameRate: 20,
            repeat: -1,
          });
          /*怪物攻擊*/
          this.anims.create({
            key: "bullet",
            frames: this.anims.generateFrameNumbers("mobsBullet", {
              start: 0,
              end: 5,
            }),
            frameRate: 10,
            repeat: 0,
          });
          /*怪物*/
          this.anims.create({
            key: "mobs1Left",
            frames: this.anims.generateFrameNumbers("mobs1", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          this.anims.create({
            key: "mobs2Left",
            frames: this.anims.generateFrameNumbers("mobs2", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          this.anims.create({
            key: "mobs3Left",
            frames: this.anims.generateFrameNumbers("mobs3", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          /*三角錐動畫*/
          this.anims.create({
            key: "cones",
            frames: this.anims.generateFrameNumbers("cones", {
              start: 0,
              end: 1,
            }),
            frameRate: 10,
            repeat: -1,
          });
          cones.children.iterate(function (child) {
            child.anims.play("cones", true);
          });
        },
        update: function () {
          if (drop_num < 0) {
            drop_num = 0;
            show_dropnum.setText(drop_num);
          }
          if (mask_num < 0) {
            mask_num = 0;
            show_masknum.setText(mask_num);
          }

          if (time <= 10) {
            show_time.setColor("rgba(255, 0, 0, 1)");
            show_time.fontSize = 40;
          }
          if (blood_num <= 0) {
            sceneBGM.pause();
            this.scene.stop();
            this.scene.start("lose_config");
          }
          if (isStart) {
            mobs1.anims.play("mobs1Left", true);
            mobs2.anims.play("mobs2Left", true);
            mobs3.anims.play("mobs3Left", true);
            scene1_mobsMove();
            itemUse();
            if (cursors.up.isDown && player.body.touching.down) {
              player.setVelocityY(-450);
              jump.play();
            }
            if (cursors.left.isDown) {
              player.setVelocityX(-300);
              player.anims.play("left", true);
              isLeft = true;
            } else if (cursors.right.isDown) {
              player.setVelocityX(300);
              player.anims.play("right", true);
              isLeft = false;
            } else {
              player.setVelocityX(0);
              if (isLeft) {
                player.anims.play("turnLeft", true);
              } else {
                player.anims.play("turnRight", true);
              }
            }

            if (car.x <= -300) {
              isCarLeft = false;
            } else if (car.x >= 4500) {
              isCarLeft = true;
            }
            if (isCarLeft) {
              car.setVelocityX(-300);
              car.anims.play("carLeft", true);
            } else {
              car.setVelocityX(300);
              car.anims.play("carRight", true);
            }
          } else {
            player.anims.play("turnRight");
          }

          if (
            (player.x >= 1970 && player.x <= 2030 && player.y == 357.25) ||
            (player.x >= 3120 && player.x <= 3180 && player.y == 357.25)
          ) {
            playerbehit.play();
            player.x = 100;
            player.anims.play("turnRight");
            blood_num -= 1;
            show_bloodnum.setText(blood_num);
          }

          switch (blood_num) {
            case 9:
              blood.setTexture("lives", [8]);
              break;
            case 8:
              blood.setTexture("lives", [7]);
              break;
            case 7:
              blood.setTexture("lives", [6]);
              break;
            case 6:
              blood.setTexture("lives", [5]);
              break;
            case 5:
              blood.setTexture("lives", [4]);
              break;
            case 4:
              blood.setTexture("lives", [3]);
              break;
            case 3:
              blood.setTexture("lives", [2]);
              break;
            case 2:
              blood.setTexture("lives", [1]);
              break;
            case 1:
              blood.setTexture("lives", [0]);
              break;
            case 0:
              blood.setTexture("bloodbox");
              break;
            default:
              blood.setTexture("lives", [9]);
              break;
          }
        },
        physics: {
          default: "arcade",
          arcade: {
            gravity: { y: 700 },
            debug: false,
          },
        },
      };
      const scene2_config = {
        key: "scene2",
        type: Phaser.AUTO,
        active: false,
        visible: false,
        width: 960,
        height: 540,
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
        },
        preload: preload,
        create: function () {
          sceneBGM.play();
          isLeft = false;
          isCarLeft = true;
          isBird1Left = true;
          isBird2Left = true;
          isMobs1Left = true;
          isMobs2Left = true;
          isMobs3Left = true;
          isMaskBOut = false;
          time = 120;
          blood_num = 10;
          cursors = this.input.keyboard.createCursorKeys();
          G = this.input.keyboard.addKey("G");
          H = this.input.keyboard.addKey("H");
          this.physics.world.setBounds(0, 0, 3836, 540);
          /*背景*/
          this.add.image(0, 0, "sbg").setOrigin(0, 0).setScale(0.5);
          this.add.image(959, 0, "sbg1").setOrigin(0, 0).setScale(0.5);
          this.add.image(1918, 0, "sbg2").setOrigin(0, 0).setScale(0.5);
          this.add.image(2877, 0, "sbg3").setOrigin(0, 0).setScale(0.5);
          /*地板*/
          ground = this.physics.add.staticGroup();
          ground
            .create(-960, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(0, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(959, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(1918, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(2877, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          ground
            .create(3836, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          /*平台*/
          platforms = this.physics.add.staticGroup();
          platforms.create(950, Phaser.Math.Between(270, 290), "platforms");
          platforms.create(1350, Phaser.Math.Between(220, 240), "platforms");
          platforms.create(1900, Phaser.Math.Between(270, 290), "platforms");
          platforms.create(2700, Phaser.Math.Between(270, 290), "platforms");
          platforms.create(3150, Phaser.Math.Between(220, 240), "platforms");
          /*移動平台*/
          paddle = this.physics.add.image(3500, 350, "paddle");
          paddle.body.allowGravity = false;
          paddle.setPushable(false);
          paddle.scene.tweens.add({
            targets: paddle,
            y: 150,
            ease: "Linear",
            duration: 2000,
            repeat: -1,
            yoyo: true,
          });
          /*玩家*/
          player = this.physics.add
            .sprite(100, 100, "player")
            .setScale(0.35)
            .refreshBody();
          player.setCollideWorldBounds(true);
          /*酒精滴滴*/
          drop = this.physics.add.group();
          for (let i = 0; i < 9; i++) {
            drop
              .create(
                Phaser.Math.Between(1050, 3800),
                Phaser.Math.Between(0, 320),
                "drop"
              )
              .setScale(0.5);
          }
          /*口罩*/
          mask = this.physics.add.group();
          for (let i = 0; i < 5; i++) {
            mask
              .create(
                Phaser.Math.Between(1050, 3800),
                Phaser.Math.Between(0, 320),
                "mask"
              )
              .setScale(0.35);
          }
          maskB = this.physics.add
            .image(player.x, player.y, "mask")
            .setScale(0.3);
          maskB.body.allowGravity = false;
          maskB.setVisible(false);
          /*防毒面具*/
          gasmask = this.physics.add.group();
          gasmask
            .create(
              Phaser.Math.Between(1050, 3800),
              Phaser.Math.Between(0, 320),
              "gasmask"
            )
            .setScale(0.4);
          /*問號盒子*/
          randombox = this.physics.add.group();
          randombox.create(3500, 0, "randombox").setScale(0.45);
          bonus = [
            this.add.image(scene2_config.width / 2, 50, "pBonus1").setScale(0),
            this.add.image(scene2_config.width / 2, 50, "pBonus2").setScale(0),
            this.add.image(scene2_config.width / 2, 50, "nBonus1").setScale(0),
            this.add.image(scene2_config.width / 2, 50, "nBonus2").setScale(0),
          ];
          for (let i = 0; i < bonus.length; i++) {
            bonus[i].scrollFactorX = 0;
            bonus[i].setVisible(false);
          }
          /*障礙*/
          car = this.physics.add
            .sprite(4500, Phaser.Math.Between(0, 320), "car")
            .setScale(0.3);
          car.setPushable(false);
          holebg = this.add.group();
          holebg.create(2000, 356, "holebg").setScale(0.5);
          holebg.create(2700, 356, "holebg").setScale(0.5);
          hole = this.add.group();
          hole.create(2000, 396, "hole").setScale(0.5);
          hole.create(2700, 396, "hole").setScale(0.5);
          cones = this.physics.add.group();
          cones.create(500, 100, "cones").setScale(0.35);
          cones.create(2800, 100, "cones").setScale(0.35);
          cones.children.iterate(function (child) {
            child.setPushable(false);
          });
          bird1 = this.physics.add.sprite(1250, 150, "bird").setScale(0.35);
          bird1.body.allowGravity = false;
          bird1.setPushable(false);
          bird2 = this.physics.add.sprite(3000, 150, "bird").setScale(0.35);
          bird2.body.allowGravity = false;
          bird2.setPushable(false);
          /*小怪*/
          mobs1 = this.physics.add.sprite(1475, 100, "mobs1").setScale(0.35);
          mobs2 = this.physics.add.sprite(2050, 100, "mobs2").setScale(0.35);
          mobs3 = this.physics.add.sprite(3600, 300, "mobs3").setScale(0.35);
          mobs1B = this.physics.add
            .sprite(mobs1.x, mobs1.y - 20, "mobsBullet")
            .setVisible(false)
            .setScale(0.5);
          mobs2B = this.physics.add
            .sprite(mobs2.x, mobs2.y - 20, "mobsBullet")
            .setVisible(false)
            .setScale(0.5);
          mobs3B = this.physics.add
            .sprite(mobs3.x, mobs3.y - 20, "mobsBullet")
            .setVisible(false)
            .setScale(0.5);
          mobs1B.body.allowGravity = false;
          mobs2B.body.allowGravity = false;
          mobs3B.body.allowGravity = false;
          mobs = { mobs1, mobs2, mobs3 };
          mobsB = { mobs1B, mobs2B, mobs3B };
          /*相機*/
          let camera = this.cameras.main;
          camera.setBounds(0, 0, 3836, 540);
          camera.startFollow(player);
          /*UI*/
          pauseBtn = this.add
            .image(920, 500, "pause")
            .setScale(0.5)
            .setScrollFactor(0)
            .setInteractive()
            .on("pointerover", () => {
              pauseBtn.setScale(0.6);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              pauseBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              sceneBGM.pause();
              this.scene.pause("scene2");
              this.scene.run("pause_config");
            });
          itembox = this.add
            .image(scene2_config.width / 2, 490, "itembox")
            .setScale(0.5)
            .setScrollFactor(0);
          ibH = this.add
            .text(530, 500, "H", { align: "center", fontSize: "20px" })
            .setScrollFactor(0);
          ibG = this.add
            .text(457, 500, "G", { align: "center", fontSize: "20px" })
            .setScrollFactor(0);
          ibF = this.add
            .text(383, 500, "", { align: "center", fontSize: "20px" })
            .setScrollFactor(0);
          show_drop = this.add
            .image(32, 32, "drop")
            .setScale(0.5)
            .setScrollFactor(0);
          show_mask = this.add
            .image(32, 80, "mask")
            .setScale(0.5)
            .setScrollFactor(0);
          show_dropnum = this.add
            .text(75, 16, drop_num, { align: "center", fontSize: "25px" })
            .setScrollFactor(0);
          show_masknum = this.add
            .text(75, 64, mask_num, { align: "center", fontSize: "25px" })
            .setScrollFactor(0);
          bloodbox = this.add
            .image(770, 40, "bloodbox")
            .setScale(0.5)
            .setScrollFactor(0);
          blood = this.add
            .image(770, 40, "lives", [9])
            .setScale(0.5)
            .setScrollFactor(0);
          show_bloodnum = this.add
            .text(900, 28, blood_num, {
              align: "center",
              fontSize: "25px",
              color: "rgba(255, 0, 0, 1)",
            })
            .setScrollFactor(0);
          clockbox = this.add
            .image(80, 490, "clock")
            .setScrollFactor(0)
            .setScale(0.6);
          show_time = this.add
            .text(70, 477, time + "s", {
              align: "center",
              fontSize: "30px",
              color: "rgba(0, 0, 0, 1)",
            })
            .setScrollFactor(0);
          show_gasmasknum = this.add
            .text(562, 503, gasmask_num, { align: "center", fontSize: "15px" })
            .setScrollFactor(0);
          ibshow_alcohol = this.add
            .image(405, 490, "alcohol1")
            .setScale(0.4)
            .setScrollFactor(0)
            .setTint(0x000000);
          ibshow_mask = this.add
            .image(480, 485, "mask")
            .setScale(0.4)
            .setScrollFactor(0)
            .setTint(0x000000);
          ibshow_gasmask = this.add
            .image(551, 485, "gasmask")
            .setScale(0.3)
            .setScrollFactor(0)
            .setTint(0x000000);
          car.anims.play("car", true);
          car.setVelocityX(-200);

          this.time.addEvent({
            loop: true,
            delay: 1000,
            callback: showTime,
            callbackScope: this,
          });
          this.time.addEvent({
            loop: true,
            delay: 30000,
            callback: newItem,
            callbackScope: this,
          });
          this.time.addEvent({
            loop: true,
            delay: 2000,
            callback: mobsAttack,
            callbackScope: this,
          });
          boss2 = this.add
            .image(config.width / 2, config.height / 2, "boss2")
            .setScale(0.5)
            .setScrollFactor(0)
            .setDepth(1);
          boss2.setVisible(false);
          /*碰撞偵測*/
          this.physics.add.collider(drop, platforms);
          this.physics.add.collider(drop, ground);
          this.physics.add.collider(mask, platforms);
          this.physics.add.collider(mask, ground);
          this.physics.add.overlap(player, drop, colleDrop, null, this);
          this.physics.add.overlap(player, mask, colleMask, null, this);
          this.physics.add.overlap(player, randombox, colleBox, null, this);
          this.physics.add.overlap(player, gasmask, colleGasmask, null, this);
          this.physics.add.collider(player, platforms);
          this.physics.add.collider(player, ground);
          this.physics.add.collider(paddle, ground);
          this.physics.add.collider(paddle, player);
          this.physics.add.collider(car, player);
          this.physics.add.collider(car, ground);
          this.physics.add.collider(bird1, player);
          this.physics.add.collider(bird2, player);
          this.physics.add.collider(randombox, paddle);
          this.physics.add.collider(cones, platforms);
          this.physics.add.collider(cones, ground);
          this.physics.add.collider(cones, player);
          this.physics.add.collider(gasmask, platforms);
          this.physics.add.collider(gasmask, ground);
          this.physics.add.collider(mobs1, ground);
          this.physics.add.collider(mobs1, platforms);
          this.physics.add.collider(mobs2, ground);
          this.physics.add.collider(mobs2, platforms);
          this.physics.add.collider(mobs3, ground);
          this.physics.add.collider(mobs3, platforms);
          this.physics.add.overlap(maskB, mobs1, maskhitMobs1, null, this);
          this.physics.add.overlap(maskB, mobs2, maskhitMobs2, null, this);
          this.physics.add.overlap(maskB, mobs3, maskhitMobs3, null, this);
          this.physics.add.overlap(player, mobs1B, hittedMobs, null, this);
          this.physics.add.overlap(player, mobs2B, hittedMobs, null, this);
          this.physics.add.overlap(player, mobs3B, hittedMobs, null, this);
          /*人物動作動畫*/
          this.anims.create({
            key: "right",
            frames: this.anims.generateFrameNumbers("player", {
              start: 4,
              end: 7,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "left",
            frames: this.anims.generateFrameNumbers("player", {
              start: 0,
              end: 3,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "turnRight",
            frames: [{ key: "player", frame: 4 }],
            frameRate: 20,
          });
          this.anims.create({
            key: "turnLeft",
            frames: [{ key: "player", frame: 3 }],
            frameRate: 20,
          });
          /*車動畫*/
          this.anims.create({
            key: "carLeft",
            frames: this.anims.generateFrameNumbers("car", {
              start: 0,
              end: 3,
            }),
            frameRate: 20,
            repeat: -1,
          });
          this.anims.create({
            key: "carRight",
            frames: this.anims.generateFrameNumbers("car", {
              start: 5,
              end: 8,
            }),
            frameRate: 20,
            repeat: -1,
          });
          /*鳥飛*/
          this.anims.create({
            key: "bird",
            frames: this.anims.generateFrameNumbers("bird", {
              start: 0,
              end: 7,
            }),
            frameRate: 20,
            repeat: -1,
          });
          /*怪物攻擊*/
          this.anims.create({
            key: "bullet",
            frames: this.anims.generateFrameNumbers("mobsBullet", {
              start: 0,
              end: 5,
            }),
            frameRate: 10,
            repeat: 0,
          });
          /*怪物一*/
          this.anims.create({
            key: "mobs1Left",
            frames: this.anims.generateFrameNumbers("mobs1", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          this.anims.create({
            key: "mobs2Left",
            frames: this.anims.generateFrameNumbers("mobs2", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          this.anims.create({
            key: "mobs3Left",
            frames: this.anims.generateFrameNumbers("mobs3", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          /*三角錐動畫*/
          this.anims.create({
            key: "cones",
            frames: this.anims.generateFrameNumbers("cones", {
              start: 0,
              end: 1,
            }),
            frameRate: 10,
            repeat: -1,
          });
          cones.children.iterate(function (child) {
            child.anims.play("cones", true);
          });
        },
        update: function () {
          if (drop_num < 0) {
            drop_num = 0;
            show_dropnum.setText(drop_num);
          }
          if (mask_num < 0) {
            mask_num = 0;
            show_masknum.setText(mask_num);
          }
          if (time <= 10) {
            show_time.setColor("rgba(255, 0, 0, 1)");
            show_time.fontSize = 40;
          }
          if (blood_num <= 0) {
            this.scene.stop();
            sceneBGM.pause();
            this.scene.start("lose_config");
          }
          if (isStart) {
            mobs1.anims.play("mobs1Left", true);
            mobs2.anims.play("mobs2Left", true);
            mobs3.anims.play("mobs3Left", true);
            scene2_mobsMove();
            itemUse();
            if (cursors.up.isDown && player.body.touching.down) {
              player.setVelocityY(-450);
              jump.play();
            }
            if (cursors.left.isDown) {
              player.setVelocityX(-300);
              player.anims.play("left", true);
              isLeft = true;
            } else if (cursors.right.isDown) {
              player.setVelocityX(300);
              player.anims.play("right", true);
              isLeft = false;
            } else {
              player.setVelocityX(0);
              if (isLeft) {
                player.anims.play("turnLeft", true);
              } else {
                player.anims.play("turnRight", true);
              }
            }

            if (car.x <= -300) {
              isCarLeft = false;
            } else if (car.x >= 4500) {
              isCarLeft = true;
            }
            if (isCarLeft) {
              car.setVelocityX(-200);
              car.anims.play("carLeft", true);
            } else {
              car.setVelocityX(200);
              car.anims.play("carRight", true);
            }

            if (bird1.x <= 950) {
              isBird1Left = false;
            } else if (bird1.x >= 1250) {
              isBird1Left = true;
            }
            if (isBird1Left) {
              bird1.setVelocityX(-100);
              bird1.anims.play("bird", true);
              bird1.flipX = false;
            } else {
              bird1.setVelocityX(100);
              bird1.anims.play("bird", true);
              bird1.flipX = true;
            }

            if (bird2.x <= 2700) {
              isBird2Left = false;
            } else if (bird2.x >= 3000) {
              isBird2Left = true;
            }
            if (isBird2Left) {
              bird2.setVelocityX(-100);
              bird2.anims.play("bird", true);
              bird2.flipX = false;
            } else {
              bird2.setVelocityX(100);
              bird2.anims.play("bird", true);
              bird2.flipX = true;
            }
          } else {
            player.anims.play("turnRight");
          }

          if (
            (player.x >= 1970 && player.x <= 2030 && player.y == 357.25) ||
            (player.x >= 2670 && player.x <= 2730 && player.y == 357.25)
          ) {
            playerbehit.play();
            player.x = 100;
            player.anims.play("turnRight");
            blood_num -= 1;
            show_bloodnum.setText(blood_num);
          }

          switch (blood_num) {
            case 9:
              blood.setTexture("lives", [8]);
              break;
            case 8:
              blood.setTexture("lives", [7]);
              break;
            case 7:
              blood.setTexture("lives", [6]);
              break;
            case 6:
              blood.setTexture("lives", [5]);
              break;
            case 5:
              blood.setTexture("lives", [4]);
              break;
            case 4:
              blood.setTexture("lives", [3]);
              break;
            case 3:
              blood.setTexture("lives", [2]);
              break;
            case 2:
              blood.setTexture("lives", [1]);
              break;
            case 1:
              blood.setTexture("lives", [0]);
              break;
            case 0:
              blood.setTexture("bloodbox");
              break;
            default:
              blood.setTexture("lives", [9]);
              break;
          }
        },
        physics: {
          default: "arcade",
          arcade: {
            gravity: { y: 700 },
            debug: false,
          },
        },
      };
      const pause_config = {
        key: "pause_config",
        type: Phaser.AUTO,
        active: false,
        visible: false,
        backgroundColor: "#ffffff",
        width: 960,
        height: 540,
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
        },
        preload: function () {
          this.load.image("menubg", "./_img/BGMenu.PNG");
          this.load.image("pausebg", "./_img/BGPaused.PNG");
          this.load.image("continue", "./_img/buttoncontinue.PNG");
          this.load.image("home", "./_img/buttonhome.PNG");
          this.load.image("restart", "./_img/buttonrestart.PNG");
        },
        create: function () {
          menuBG = this.add.image(0, 0, "menubg").setOrigin(0, 0).setScale(0.5);
          pauseBG = this.add
            .image(0, 0, "pausebg")
            .setOrigin(0, 0)
            .setScale(0.5);
          continueBtn = this.add
            .image(pause_config.width / 2, 350, "continue")
            .setScale(0.5)
            .setInteractive()
            .on("pointerover", () => {
              continueBtn.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              continueBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              this.scene.stop("pause_config");
              if (this.scene.isPaused("scene1")) {
                this.scene.resume("scene1");
                sceneBGM.resume();
              } else if (this.scene.isPaused("scene2")) {
                this.scene.resume("scene2");
                sceneBGM.resume();
              } else if (this.scene.isPaused("boss1_config")) {
                this.scene.resume("boss1_config");
              } else if (this.scene.isPaused("boss2_config")) {
                this.scene.resume("boss2_config");
                boss2BGM.resume();
              }
            });
          homeBtn = this.add
            .image(pause_config.width / 2 - 150, 350, "home")
            .setScale(0.5)
            .setInteractive()
            .on("pointerover", () => {
              homeBtn.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              homeBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              //console.log('home');
              adbtnclick.play();
              this.scene.stop("pause_config");
              if (this.scene.isPaused("scene1")) {
                this.scene.stop("scene1");
              } else if (this.scene.isPaused("scene2")) {
                this.scene.stop("scene2");
              } else if (this.scene.isPaused("boss1_config")) {
                this.scene.stop("boss1_config");
              } else if (this.scene.isPaused("boss2_config")) {
                this.scene.stop("boss2_config");
              }
              this.scene.start("home");
            });
          restartBtn = this.add
            .image(pause_config.width / 2 + 150, 350, "restart")
            .setScale(0.5)
            .setScale(0.5)
            .setInteractive()
            .on("pointerover", () => {
              adbtnhover.play();
              restartBtn.setScale(0.55);
            })
            .on("pointerout", () => {
              restartBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              this.scene.stop("pause_config");
              if (this.scene.isPaused("scene1")) {
                this.scene.stop("scene1");
              } else if (this.scene.isPaused("scene2")) {
                this.scene.stop("scene2");
              } else if (this.scene.isPaused("boss1_config")) {
                this.scene.stop("boss1_config");
              } else if (this.scene.isPaused("boss2_config")) {
                this.scene.stop("boss2_config");
              }
              this.scene.start("scene1");
            });
        },
        physics: {
          default: "arcade",
          arcade: {
            gravity: false,
            debug: false,
          },
        },
      };
      const home_config = {
        key: "home",
        active: true,
        visible: true,
        type: Phaser.AUTO,
        width: 960,
        height: 540,
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
        },
        preload: home_preload,
        create: function () {
          round2 = this.add
            .image(config.width / 2, config.height / 2, "round2")
            .setScale(0);
          round2.setVisible(false);
          adbtnclick = this.sound.add("adbtnclick", {
            volume: 0.5,
            loop: false,
          });
          adbtnhover = this.sound.add("adbtnhover", {
            volume: 0.1,
            loop: false,
          });
          round = this.sound.add("round", { volume: 0.1, loop: false });
          let homeBGM = this.sound.add("homeBGM", {
            volume: 0.1,
            loop: true,
          });
          homeBGM.play();
          homebg = this.add.image(0, 0, "bg").setOrigin(0, 0).setScale(0.5);
          mobs1bg = this.physics.add
            .sprite(1100, 357, "mobs1bg")
            .setScale(0.35);
          mobs2bg = this.physics.add
            .sprite(1200, 357, "mobs2bg")
            .setScale(0.35);
          mobs3bg = this.physics.add
            .sprite(1300, 357, "mobs3bg")
            .setScale(0.35);
          mobs1bg.body.allowGravity = false;
          mobs2bg.body.allowGravity = false;
          mobs3bg.body.allowGravity = false;
          mobs1bg.scene.tweens.add({
            targets: mobs1bg,
            x: -300,
            ease: "Linear",
            duration: 8000,
            repeat: -1,
            yoyo: false,
          });
          mobs2bg.scene.tweens.add({
            targets: mobs2bg,
            x: -200,
            ease: "Linear",
            duration: 8000,
            repeat: -1,
            yoyo: false,
          });
          mobs3bg.scene.tweens.add({
            targets: mobs3bg,
            x: -100,
            ease: "Linear",
            duration: 8000,
            repeat: -1,
            yoyo: false,
          });
          carbg = this.physics.add.sprite(1000, 357, "carbg").setScale(0.3);
          carbg.body.allowGravity = false;
          carbg.scene.tweens.add({
            targets: carbg,
            x: -400,
            ease: "Linear",
            duration: 8000,
            repeat: -1,
            yoyo: false,
          });
          bird1bg = this.physics.add.sprite(-100, 100, "birdbg").setScale(0.35);
          bird1bg.body.allowGravity = false;
          bird1bg.flipX = true;
          bird1bg.scene.tweens.add({
            targets: bird1bg,
            x: 1150,
            ease: "Linear",
            duration: 10000,
            repeat: -1,
            yoyo: false,
          });
          bird2bg = this.physics.add.sprite(-250, 80, "birdbg").setScale(0.35);
          bird2bg.body.allowGravity = false;
          bird2bg.flipX = true;
          bird1bg.scene.tweens.add({
            targets: bird2bg,
            x: 1000,
            ease: "Linear",
            duration: 10000,
            repeat: -1,
            yoyo: false,
          });
          /*車動畫*/
          this.anims.create({
            key: "carbgrun",
            frames: this.anims.generateFrameNumbers("carbg", {
              start: 0,
              end: 3,
            }),
            frameRate: 20,
            repeat: -1,
          });
          carbg.anims.play("carbgrun", true);
          /*鳥飛*/
          this.anims.create({
            key: "birdbg",
            frames: this.anims.generateFrameNumbers("birdbg", {
              start: 0,
              end: 7,
            }),
            frameRate: 20,
            repeat: -1,
          });
          bird1bg.anims.play("birdbg", true);
          bird2bg.anims.play("birdbg", true);
          this.anims.create({
            key: "mobs1bgrun",
            frames: this.anims.generateFrameNumbers("mobs1bg", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          mobs1bg.anims.play("mobs1bgrun", true);
          this.anims.create({
            key: "mobs2bgrun",
            frames: this.anims.generateFrameNumbers("mobs2bg", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          mobs2bg.anims.play("mobs2bgrun", true);
          this.anims.create({
            key: "mobs3bgrun",
            frames: this.anims.generateFrameNumbers("mobs3bg", {
              start: 0,
              end: 3,
            }),
            frameRate: 3,
            repeat: -1,
          });
          mobs3bg.anims.play("mobs3bgrun", true);
          b2 = this.add.image(0, 0, "menubg").setOrigin(0, 0).setScale(0.5);
          title = this.add
            .image(home_config.width / 2, home_config.height / 2 - 100, "title")
            .setScale(0.35);
          playBtn = this.add
            .image(home_config.width / 2, home_config.height / 2 + 30, "play")
            .setScale(0.35)
            .setInteractive()
            .on("pointerover", () => {
              playBtn.setScale(0.385);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              playBtn.setScale(0.35);
            })
            .on("pointerup", () => {
              homeBGM.stop();
              adbtnclick.play();
              round1.setVisible(true);
              round.play();
              round1.scene.tweens.add({
                targets: round1,
                scaleX: 0.5,
                scaleY: 0.5,
                ease: "Linear",
                duration: 2000,
                repeat: 0,
                yoyo: false,
                onComplete: () => {
                  this.scene.stop("home");
                  this.scene.start("scene1");
                  isStart = true;
                },
              });
            });
          let page = 0;
          skillBtn = this.add
            .image(home_config.width / 2, home_config.height / 2 + 120, "skill")
            .setScale(0.35)
            .setInteractive()
            .on("pointerover", () => {
              skillBtn.setScale(0.385);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              skillBtn.setScale(0.35);
            })
            .on("pointerup", () => {
              //開啟說明
              adbtnclick.play();
              guide.setVisible(true);
              next.setVisible(true);
              quit.setVisible(true);
              page = 0;
            });
          round1 = this.add
            .image(home_config.width / 2, home_config.height / 2, "round1")
            .setScale(0);
          round1.setVisible(false);
          guide = this.add
            .sprite(home_config.width / 2, home_config.height / 2, "guide")
            .setScale(0.6);
          guide.setVisible(false);
          next = this.add
            .image(
              home_config.width / 2 + 300,
              home_config.height / 2 + 200,
              "next"
            )
            .setScale(0.5)
            .setVisible(false)
            .setInteractive()
            .on("pointerover", () => {
              next.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              next.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              page++;
              guide.setTexture("guide", [page]);
              if (page == 7) {
                next.setVisible(false);
              } else {
                next.setVisible(true);
                last.setVisible(true);
              }
            });
          last = this.add
            .image(
              home_config.width / 2 - 300,
              home_config.height / 2 + 200,
              "last"
            )
            .setScale(0.5)
            .setVisible(false)
            .setInteractive()
            .on("pointerover", () => {
              last.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              last.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              page--;
              guide.setTexture("guide", [page]);
              if (page == 0) {
                last.setVisible(false);
              } else {
                last.setVisible(true);
                next.setVisible(true);
              }
            });
          quit = this.add
            .image(
              home_config.width / 2 + 300,
              home_config.height / 2 - 200,
              "close"
            )
            .setScale(0.5)
            .setVisible(false)
            .setInteractive()
            .on("pointerover", () => {
              quit.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              quit.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              last.setVisible(false);
              next.setVisible(false);
              guide.setVisible(false);
              quit.setVisible(false);
            });
        },
        physics: {
          default: "arcade",
          arcade: {
            gravity: false,
            debug: false,
          },
        },
      };
      const boss1_config = {
        key: "boss1_config",
        active: false,
        visible: false,
        create: function () {
          cursors = this.input.keyboard.createCursorKeys();
          this.add.image(0, 0, "bg").setScale(0.5).setOrigin(0, 0);
          ground = this.physics.add.staticGroup();
          ground
            .create(0, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          platforms = this.physics.add.staticGroup();
          platforms.create(500, Phaser.Math.Between(270, 290), "platforms");
          platforms.create(950, Phaser.Math.Between(220, 240), "platforms");
          if (drop_num >= 80) {
            boss1player = this.physics.add
              .sprite(100, 100, "player1")
              .setScale(0.35)
              .refreshBody();
            damage = 10;
          } else if (drop_num >= 50) {
            boss1player = this.physics.add
              .sprite(100, 100, "player2")
              .setScale(0.35)
              .refreshBody();
            damage = 5;
          } else if (drop_num >= 25) {
            boss1player = this.physics.add
              .sprite(100, 100, "player3")
              .setScale(0.35)
              .refreshBody();
            damage = 3;
          }
          //boss1player = this.physics.add.sprite(100, 100, 'player1').setScale(0.35).refreshBody();
          boss1player.setCollideWorldBounds(true);

          this.physics.add.collider(boss1player, ground);
          this.physics.add.collider(boss1player, platforms);
          /*人物動作動畫*/
          this.anims.create({
            key: "bp1right",
            frames: this.anims.generateFrameNumbers("player1", {
              start: 4,
              end: 7,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "bp1left",
            frames: this.anims.generateFrameNumbers("player1", {
              start: 0,
              end: 3,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "bp1turnRight",
            frames: [{ key: "player1", frame: 4 }],
            frameRate: 20,
          });
          this.anims.create({
            key: "bp1turnLeft",
            frames: [{ key: "player1", frame: 3 }],
            frameRate: 20,
          });

          sceneBGM = this.sound.add("sceneBGM", { volume: 0.1, loop: true });
          adbtnclick = this.sound.add("adbtnclick", {
            volume: 0.5,
            loop: false,
          });
          adbtnhover = this.sound.add("adbtnhover", {
            volume: 0.1,
            loop: false,
          });
          jump = this.sound.add("jump", { volume: 0.1, loop: false });
          mobsbehit = this.sound.add("mobsbehit", { volume: 1, loop: false });
          pick = this.sound.add("pick", { volume: 1, loop: false });
          playermask = this.sound.add("playermask", { volume: 1, loop: false });
          loseBGM = this.sound.add("loseBGM", { volume: 0.1, loop: true });
          playerbehit = this.sound.add("playerbehit", {
            volume: 1,
            loop: false,
          });
          heal = this.sound.add("heal", { volume: 0.5, loop: false });
          Pbonus = this.sound.add("Pbonus", { volume: 1, loop: false });
          Nbonus = this.sound.add("Nbonus", { volume: 1, loop: false });
          round = this.sound.add("round", { volume: 0.1, loop: false });
          warn = this.sound.add("warn", { volume: 1, loop: false });
          count = this.sound.add("count", { volume: 0.5, loop: false });
          sceneBGM.play();
          isLeft = false;
          bp1left = false;
          isAlcoOut = false;
          time = 60;
          blood_num = 10;
          BossBlood_num = 20;
          G = this.input.keyboard.addKey("G");
          H = this.input.keyboard.addKey("H");
          F = this.input.keyboard.addKey("F");
          this.physics.world.setBounds(0, 0, 960, 540);
          /*大BOSS*/
          bossP = this.physics.add.sprite(900, 100, "bossP").setScale(0.25);
          bossP.setPushable(false);
          bossP.setCollideWorldBounds(true);
          /*地雷*/
          land1 = this.physics.add.sprite(600, 300, "land1").setScale(0.25);
          land1.setPushable(false);
          land1.setCollideWorldBounds(true);

          land2 = this.physics.add.sprite(300, 300, "land2").setScale(0.25);
          land2.setPushable(false);
          land2.setCollideWorldBounds(true);

          bomb1 = this.physics.add.sprite(600, 300, "bomb1").setScale(0.25);
          bomb2 = this.physics.add.sprite(300, 300, "bomb2").setScale(0.25);
          alcoB = this.physics.add
            .image(boss1player.x, boss1player.y, "alcoB")
            .setScale(0.3)
            .refreshBody();
          alcoB.body.allowGravity = false;
          alcoB.setVisible(false);
          /*相機*/
          let camera = this.cameras.main;
          camera.setBounds(0, 0, 960, 540);
          camera.startFollow(boss1player);
          /*UI*/
          isStart = true;
          pauseBtn = this.add
            .image(920, 500, "pause")
            .setScale(0.5)
            .setScrollFactor(0)
            .setInteractive()
            .on("pointerover", () => {
              pauseBtn.setScale(0.6);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              pauseBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              sceneBGM.pause();
              this.scene.pause("boss1_config");
              this.scene.launch("pause_config");
            });
          bloodbox = this.add
            .image(770, 40, "bloodbox")
            .setScale(0.5)
            .setScrollFactor(0);
          blood = this.add
            .image(770, 40, "lives", [9])
            .setScale(0.5)
            .setScrollFactor(0);
          show_bloodnum = this.add
            .text(900, 28, blood_num, {
              align: "center",
              fontSize: "25px",
              color: "rgba(255, 0, 0, 1)",
            })
            .setScrollFactor(0);
          BossBlood = this.add
            .image(770, 80, "Boss1Lives", [10])
            .setScale(0.5)
            .setScrollFactor(0);
          show_BossBloodnum = this.add
            .text(900, 78, BossBlood_num, {
              align: "center",
              fontSize: "25px",
              color: "rgba(255, 0, 0, 1)",
            })
            .setScrollFactor(0);
          clockbox = this.add
            .image(80, 490, "clock")
            .setScrollFactor(0)
            .setScale(0.6);
          show_time = this.add
            .text(75, 477, time + "s", {
              align: "center",
              fontSize: "30px",
              color: "rgba(0, 0, 0, 1)",
            })
            .setScrollFactor(0);
          boss1 = this.add
            .image(config.width / 2, config.height / 2, "boss1")
            .setScale(0.5)
            .setScrollFactor(0)
            .setDepth(1);
          boss1.setVisible(false);
          bomb1.setVisible(false);
          bomb2.setVisible(false);
          isBossPLeft = true;
          isBossPDown = true;
          round2 = this.add
            .image(config.width / 2, config.height / 2, "round2")
            .setScale(0);
          round2.setVisible(false);
          this.time.addEvent({
            loop: true,
            delay: 1000,
            callback: boss1Time,
            callbackScope: this,
          });
          /*碰撞偵測*/
          this.physics.add.collider(bossP, ground);
          this.physics.add.overlap(boss1player, land1);
          this.physics.add.overlap(boss1player, land2);
          this.physics.add.collider(land1, ground);
          this.physics.add.collider(land2, ground);
          this.physics.add.collider(bomb1, ground);
          this.physics.add.collider(bomb2, ground);
          this.physics.add.collider(bomb2, platforms);
          this.physics.add.overlap(boss1player, bossP, hittedBigBoss1);
          this.physics.add.overlap(boss1player, land1, hittedland1);
          this.physics.add.overlap(boss1player, land2, hittedland2);
          this.physics.add.overlap(alcoB, bossP, hittedBossP);
          /*BigBoss1動畫*/
          this.anims.create({
            key: "bossP",
            frames: this.anims.generateFrameNumbers("bossP", {
              start: 0,
              end: 32,
            }),
            frameRate: 1,
            repeat: -1,
          });

          /*地雷*/
          this.anims.create({
            key: "land1",
            frames: this.anims.generateFrameNumbers("land1", {
              start: 0,
              end: 4,
            }),
            frameRate: 1,
            repeat: -1,
          });

          this.anims.create({
            key: "land2",
            frames: this.anims.generateFrameNumbers("land2", {
              start: 0,
              end: 4,
            }),
            frameRate: 1,
            repeat: -1,
          });

          this.anims.create({
            key: "bomb1",
            frames: this.anims.generateFrameNumbers("bomb1", {
              start: 5,
              end: 11,
            }),
            frameRate: 15,
            repeat: 0,
          });

          this.anims.create({
            key: "bomb2",
            frames: this.anims.generateFrameNumbers("bomb2", {
              start: 5,
              end: 11,
            }),
            frameRate: 15,
            repeat: 0,
          });
        },
        update: function () {
          if (cursors.up.isDown && boss1player.body.touching.down) {
            boss1player.setVelocityY(-450);
            jump.play();
          }
          if (cursors.left.isDown) {
            boss1player.setVelocityX(-300);
            boss1player.anims.play("bp1left", true);
            isLeft = true;
          } else if (cursors.right.isDown) {
            boss1player.setVelocityX(300);
            boss1player.anims.play("bp1right", true);
            isLeft = false;
          } else {
            boss1player.setVelocityX(0);
            if (isLeft) {
              boss1player.anims.play("bp1turnLeft", true);
            } else {
              boss1player.anims.play("bp1turnRight", true);
            }
          }

          if (time <= 10) {
            show_time.setColor("rgba(255, 0, 0, 1)");
            show_time.fontSize = 40;
          }
          if (blood_num <= 0) {
            sceneBGM.pause();
            this.scene.stop();
            this.scene.start("lose_config");
          }
          if (BossBlood_num <= 0) {
            sceneBGM.pause();
            this.scene.stop();
            this.scene.start("winboss_config");
          }
          if (isStart) {
            land1.anims.play("land1", true);
            land2.anims.play("land2", true);
            //大BOSS
            if (bossP.x <= 150) {
              isBossPLeft = false;
            } else if (bossP.x >= 900) {
              isBossPLeft = true;
            }
            if (isBossPLeft) {
              bossP.setVelocityX(-100);
            } else {
              bossP.setVelocityX(100);
            }

            if (bossP.y <= 50) {
              isBossPDown = true;
            } else if (bossP.y >= 300) {
              isBossPDown = false;
            }
            if (isBossPDown) {
              bossP.setVelocityY(50);
            } else {
              bossP.setVelocityY(-50);
            }

            if (F.isDown) {
              if (!isAlcoOut) {
                alcoB.enableBody(true, false);
                playermask.play();
                isAlcoOut = true;
                alcoB.x = boss1player.x;
                alcoB.y = boss1player.y;
                if (isLeft) {
                  alcoB.setVisible(true);
                  alcoB.flipX = true;
                  alcoB.scene.tweens.add({
                    targets: alcoB,
                    props: {
                      x: { value: "-=500", duration: 1000, ease: "Linear" },
                      // angle: { value: '-1080', duration: 1000, ease: 'Linear', repeat: 0 }
                    },
                    duration: 3000,
                    repeat: 0,
                    yoyo: false,
                    onComplete: () => {
                      alcoB.x = boss1player.x;
                      alcoB.y = boss1player.y;
                      alcoB.setVisible(false);
                      isAlcoOut = false;
                    },
                  });
                } else {
                  alcoB.setVisible(true);
                  alcoB.flipX = false;
                  alcoB.scene.tweens.add({
                    targets: alcoB,
                    props: {
                      x: { value: "+=500", duration: 1000, ease: "Linear" },
                      // angle: { value: '-1080', duration: 1000, ease: 'Linear', repeat: 0 }
                    },
                    duration: 3000,
                    repeat: 0,
                    yoyo: false,
                    onComplete: () => {
                      alcoB.x = boss1player.x;
                      alcoB.y = boss1player.y;
                      alcoB.setVisible(false);
                      isAlcoOut = false;
                    },
                  });
                }
              }
            }
          } else {
            boss1player.anims.play("turnRight");
          }

          if (
            (boss1player.x >= 1970 &&
              boss1player.x <= 2030 &&
              boss1player.y == 357.25) ||
            (boss1player.x >= 3120 &&
              boss1player.x <= 3180 &&
              boss1player.y == 357.25)
          ) {
            playerbehit.play();
            boss1player.x = 100;
            boss1player.anims.play("turnRight");
            blood_num -= 1;
            show_bloodnum.setText(blood_num);
          }

          switch (blood_num) {
            case 9:
              blood.setTexture("lives", [8]);
              break;
            case 8:
              blood.setTexture("lives", [7]);
              break;
            case 7:
              blood.setTexture("lives", [6]);
              break;
            case 6:
              blood.setTexture("lives", [5]);
              break;
            case 5:
              blood.setTexture("lives", [4]);
              break;
            case 4:
              blood.setTexture("lives", [3]);
              break;
            case 3:
              blood.setTexture("lives", [2]);
              break;
            case 2:
              blood.setTexture("lives", [1]);
              break;
            case 1:
              blood.setTexture("lives", [0]);
              break;
            case 0:
              blood.setTexture("bloodbox");
              break;
            default:
              blood.setTexture("lives", [9]);
              break;
          }
          switch (BossBlood_num / 2) {
            case 10:
              BossBlood.setTexture("Boss1Lives", [10]);
              break;
            case 9:
              BossBlood.setTexture("Boss1Lives", [9]);
              break;
            case 8:
              BossBlood.setTexture("Boss1Lives", [8]);
              break;
            case 7:
              BossBlood.setTexture("Boss1Lives", [7]);
              break;
            case 6:
              BossBlood.setTexture("Boss1Lives", [6]);
              break;
            case 5:
              BossBlood.setTexture("Boss1Lives", [5]);
              break;
            case 4:
              BossBlood.setTexture("Boss1Lives", [4]);
              break;
            case 3:
              BossBlood.setTexture("Boss1Lives", [3]);
              break;
            case 2:
              BossBlood.setTexture("Boss1Lives", [2]);
              break;
            case 1:
              BossBlood.setTexture("Boss1Lives", [1]);
              break;
            case 0:
              BossBlood.setTexture("Boss1Lives", [0]);
              break;
          }
        },
        physics: {
          default: "arcade",
          arcade: {
            gravity: { y: 700 },
            debug: false,
          },
        },
      };

      const boss2_config = {
        key: "boss2_config",
        width: 960,
        height: 540,
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
        },
        physics: {
          default: "arcade",
          arcade: {
            gravity: { y: 700 },
            debug: false,
          },
        },
        preload: preload,
        create: function () {
          let boss1alive = true;
          boss2BGM = this.sound.add("bigboss", { volume: 0.3, loop: true });
          boss2BGM.play();
          time = 90;
          boss2_blood = 30;
          drop_num = 50;
          cursors = this.input.keyboard.createCursorKeys();
          F = this.input.keyboard.addKey("F");
          this.add.image(0, 0, "boss2bg").setScale(0.5).setOrigin(0, 0);
          ground = this.physics.add.staticGroup();
          ground
            .create(0, 466, "ground")
            .setScale(0.5)
            .setOrigin(0, 0.5)
            .refreshBody();
          platforms = this.physics.add.staticGroup();
          platforms.create(500, 280, "platforms");
          platforms.create(950, 230, "platforms");
          if (drop_num >= 80) {
            boss2player = this.physics.add
              .sprite(100, 100, "player1")
              .setScale(0.35)
              .refreshBody();
            damage = 10;
          } else if (drop_num >= 50) {
            boss2player = this.physics.add
              .sprite(100, 100, "player2")
              .setScale(0.35)
              .refreshBody();
            damage = 5;
          } else if (drop_num >= 25) {
            boss2player = this.physics.add
              .sprite(100, 100, "player3")
              .setScale(0.35)
              .refreshBody();
            damage = 2;
          }
          boss2player.setCollideWorldBounds(true);
          dropB = this.physics.add
            .image(boss2player.x, 466, "dropB")
            .setScale(0.5);
          dropB.body.allowGravity = false;
          dropB.setVisible(false);
          heart = this.physics.add.group();
          heart.create(860, 100, "heart").setScale(0.5);
          land21 = this.physics.add.sprite(480, 100, "land2").setScale(0.2);
          bomb21 = this.physics.add.sprite(480, 100, "land2").setScale(0.2);
          land22 = this.physics.add.sprite(710, 100, "land2").setScale(0.2);
          bomb22 = this.physics.add.sprite(710, 100, "land2").setScale(0.2);
          bomb21.setVisible(false);
          bomb22.setVisible(false);
          rain = this.physics.add.group();
          rain.children.iterate(function (child) {
            child.body.allowGravity = false;
            child.setVelocityY(-10);
          });
          this.time.addEvent({
            loop: true,
            delay: 20000,
            callback: function () {
              for (let i = 0; i < 5; i++) {
                rain.create(160 * (i + 1), 0, "rain").setScale(0.2);
                heart.create(860, 100, "heart").setScale(0.5);
              }
            },
            callbackScope: this,
          });
          bossG = this.physics.add
            .sprite(800, 100, "bossG")
            .setScale(0.2)
            .refreshBody()
            .setBounce(1)
            .setCollideWorldBounds(true);
          bossG.body.allowGravity = false;
          bossG.setVelocity(
            Phaser.Math.Between(-100, -50),
            Phaser.Math.Between(50, 100)
          );
          pauseBtn = this.add
            .image(920, 500, "pause")
            .setScale(0.5)
            .setScrollFactor(0)
            .setInteractive()
            .on("pointerover", () => {
              pauseBtn.setScale(0.6);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              pauseBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              boss2BGM.pause();
              this.scene.pause("boss2_config");
              this.scene.launch("pause_config");
            });
          bloodbox = this.add
            .image(770, 40, "bloodbox")
            .setScale(0.5)
            .setScrollFactor(0);
          blood = this.add
            .image(770, 40, "lives", [9])
            .setScale(0.5)
            .setScrollFactor(0);
          show_bloodnum = this.add
            .text(900, 28, blood_num, {
              align: "center",
              fontSize: "25px",
              color: "rgba(255, 0, 0, 1)",
            })
            .setScrollFactor(0);
          clockbox = this.add
            .image(80, 490, "clock")
            .setScrollFactor(0)
            .setScale(0.6);
          show_time = this.add
            .text(75, 477, time + "s", {
              align: "center",
              fontSize: "30px",
              color: "rgba(0, 0, 0, 1)",
            })
            .setScrollFactor(0);
          boss2_showblood = this.add
            .text(900, 68, boss2_blood, {
              align: "center",
              fontSize: "25px",
              color: "rgba(255, 0, 0, 1)",
            })
            .setScrollFactor(0);
          boss2_bloodbox = this.add
            .image(770, 80, "Boss2Lives", [10])
            .setScale(0.5)
            .setScrollFactor(0);
          this.time.addEvent({
            loop: true,
            delay: 1000,
            callback: function () {
              time--;
              show_time.setText(time + "s");
              if (time == 0 && boss1alive == true) {
                this.scene.stop("boss2_config");
                this.scene.start("lose_config");
              }
            },
            callbackScope: this,
          });
          this.physics.add.collider(boss2player, ground);
          this.physics.add.collider(boss2player, platforms);
          this.physics.add.collider(bossG, ground);
          this.physics.add.collider(bossG, platforms);
          this.physics.add.collider(land21, ground);
          this.physics.add.collider(land21, platforms);
          this.physics.add.collider(land22, ground);
          this.physics.add.collider(land22, platforms);
          this.physics.add.collider(bomb21, ground);
          this.physics.add.collider(bomb21, platforms);
          this.physics.add.collider(bomb22, ground);
          this.physics.add.collider(bomb22, platforms);
          this.physics.add.collider(heart, ground);
          this.physics.add.collider(heart, platforms);
          this.physics.add.collider(rain, ground, function (r, g) {
            r.destroy();
          });
          this.physics.add.overlap(
            boss2player,
            rain,
            function (b, r) {
              r.disableBody(true, true);
              blood_num -= 1;
              show_bloodnum.setText(blood_num);
            },
            null,
            this
          );
          this.physics.add.overlap(boss2player, land21, function (b, l) {
            l.disableBody(true, true);
            bomb21.setVisible(true);
            bomb21.anims.play("bomb", "true");
            blood_num -= 3;
            show_bloodnum.setText(blood_num);
          });
          this.physics.add.overlap(boss2player, land22, function (b, l) {
            l.disableBody(true, true);
            bomb22.setVisible(true);
            bomb22.anims.play("bomb", "true");
            blood_num -= 3;
            show_bloodnum.setText(blood_num);
          });
          this.physics.add.overlap(
            boss2player,
            bossG,
            function () {
              blood_num = 0;
              show_bloodnum.setText(blood_num);
            },
            null,
            this
          );
          this.physics.add.overlap(
            boss2player,
            heart,
            function (b, h) {
              h.disableBody(true, true);
              blood_num += 5;
              show_bloodnum.setText(blood_num);
            },
            null,
            this
          );
          this.physics.add.overlap(
            bossG,
            dropB,
            function (b, d) {
              playerbehit.play();
              d.disableBody(true, true);
              boss2_blood -= damage;
              boss2_showblood.setText(boss2_blood);
            },
            null,
            this
          );

          this.anims.create({
            key: "bp2right",
            frames: this.anims.generateFrameNumbers("player1", {
              start: 4,
              end: 7,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "bp2left",
            frames: this.anims.generateFrameNumbers("player1", {
              start: 0,
              end: 3,
            }),
            frameRate: 10,
            repeat: -1,
          });
          this.anims.create({
            key: "bp2turnRight",
            frames: [{ key: "player1", frame: 4 }],
            frameRate: 20,
          });
          this.anims.create({
            key: "bp2turnLeft",
            frames: [{ key: "player1", frame: 3 }],
            frameRate: 20,
            repeat: -1,
          });
          this.anims.create({
            key: "land",
            frames: this.anims.generateFrameNumbers("land2", {
              start: 0,
              end: 4,
            }),
            frameRate: 15,
            repeat: -1,
          });
          this.anims.create({
            key: "bomb",
            frames: this.anims.generateFrameNumbers("land2", {
              start: 5,
              end: 11,
            }),
            frameRate: 20,
            repeat: 0,
          });
        },
        update: function () {
          land21.anims.play("land", true);
          land22.anims.play("land", true);
          if (boss2_blood == 0) {
            boss2BGM.pause();
            this.scene.stop();
            this.scene.start("win_config");
          }
          if (blood_num == 0) {
            boss2BGM.pause();
            this.scene.stop();
            this.scene.start("lose_config");
          }
          if (cursors.up.isDown && boss2player.body.touching.down) {
            boss2player.setVelocityY(-450);
            jump.play();
          }
          if (cursors.left.isDown) {
            boss2player.setVelocityX(-300);
            boss2player.anims.play("bp2left", true);
            isLeft = true;
          } else if (cursors.right.isDown) {
            boss2player.setVelocityX(300);
            boss2player.anims.play("bp2right", true);
            isLeft = false;
          } else {
            boss2player.setVelocityX(0);
            if (isLeft) {
              boss2player.anims.play("bp2turnLeft", true);
            } else {
              boss2player.anims.play("bp2turnRight", true);
            }
          }
          if (Phaser.Input.Keyboard.JustDown(F)) {
            console.log("F");
            console.log(isDropOut);
            if (!isDropOut) {
              dropB.enableBody(true, false);
              playermask.play();
              isDropOut = true;
              dropB.x = boss2player.x;
              dropB.y = boss2player.y;
              if (isLeft) {
                dropB.setVisible(true);
                dropB.flipX = true;
                dropB.scene.tweens.add({
                  targets: dropB,
                  props: {
                    x: { value: "-=500", duration: 1000, ease: "Linear" },
                  },
                  duration: 3000,
                  repeat: 0,
                  yoyo: false,
                  onComplete: () => {
                    dropB.x = boss2player.x;
                    dropB.y = boss2player.y;
                    dropB.setVisible(false);
                    isDropOut = false;
                  },
                });
              } else {
                dropB.setVisible(true);
                dropB.flipX = false;
                dropB.scene.tweens.add({
                  targets: dropB,
                  props: {
                    x: { value: "+=500", duration: 1000, ease: "Linear" },
                  },
                  duration: 3000,
                  repeat: 0,
                  yoyo: false,
                  onComplete: () => {
                    dropB.x = boss2player.x;
                    dropB.y = boss2player.y;
                    dropB.setVisible(false);
                    isDropOut = false;
                  },
                });
              }
            }
          }
          switch (blood_num) {
            case 9:
              blood.setTexture("lives", [8]);
              break;
            case 8:
              blood.setTexture("lives", [7]);
              break;
            case 7:
              blood.setTexture("lives", [6]);
              break;
            case 6:
              blood.setTexture("lives", [5]);
              break;
            case 5:
              blood.setTexture("lives", [4]);
              break;
            case 4:
              blood.setTexture("lives", [3]);
              break;
            case 3:
              blood.setTexture("lives", [2]);
              break;
            case 2:
              blood.setTexture("lives", [1]);
              break;
            case 1:
              blood.setTexture("lives", [0]);
              break;
            case 0:
              blood.setTexture("bloodbox");
              break;
            default:
              blood.setTexture("lives", [9]);
              break;
          }

          switch (boss2_blood / 3) {
            case 9:
              boss2_bloodbox.setTexture("Boss2Lives", [9]);
              break;
            case 8:
              boss2_bloodbox.setTexture("Boss2Lives", [8]);
              break;
            case 7:
              boss2_bloodbox.setTexture("Boss2Lives", [7]);
              break;
            case 6:
              boss2_bloodbox.setTexture("Boss2Lives", [6]);
              break;
            case 5:
              boss2_bloodbox.setTexture("Boss2Lives", [5]);
              break;
            case 4:
              boss2_bloodbox.setTexture("Boss2Lives", [4]);
              break;
            case 3:
              boss2_bloodbox.setTexture("Boss2Lives", [3]);
              break;
            case 2:
              boss2_bloodbox.setTexture("Boss2Lives", [2]);
              break;
            case 1:
              boss2_bloodbox.setTexture("Boss2Lives", [1]);
              break;
            case 0:
              boss2_bloodbox.setTexture("Boss2Lives", [0]);
              break;
            default:
              boss2_bloodbox.setTexture("Boss2Lives", [10]);
              break;
          }
        },
      };
      const lose_config = {
        key: "lose_config",
        preload: function () {
          this.load.image("overbg", "./_img/BGGameover.PNG");
          this.load.image("Ohome", "./_img/buttonhome.PNG");
          this.load.image("Orestart", "./_img/buttonrestart.PNG");
        },
        create: function () {
          let OhomeBtn, OrestartBtn, overBG;
          loseBGM.play();
          overBG = this.add.image(0, 0, "overbg").setOrigin(0, 0).setScale(0.5);
          OhomeBtn = this.add
            .image(config.width / 2 - 150, 350, "Ohome")
            .setScale(0.5)
            .setInteractive()
            .on("pointerover", () => {
              OhomeBtn.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              OhomeBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              loseBGM.pause();
              this.scene.stop("lose_config");
              this.scene.start("home");
            });
          OrestartBtn = this.add
            .image(config.width / 2 + 150, 350, "Orestart")
            .setScale(0.5)
            .setScale(0.5)
            .setInteractive()
            .on("pointerover", () => {
              OrestartBtn.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              OrestartBtn.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              loseBGM.pause();
              this.scene.stop("lose_config");
              this.scene.start("scene1");
            });
        },
      };
      const win_config = {
        key: "win_config",
        backgroundColor: "#ffffff",
        preload: function () {
          this.load.image("lmenubg", "./_img/BGMenu.PNG");
          this.load.image("lhome", "./_img/buttonhome.PNG");
          this.load.image("lrestart", "./_img/buttonrestart.PNG");
          this.load.image("bgwin", "./_img/BGWin.JPG");
        },
        create: function () {
          let lmenubg, lhome, lrestart, bgwin;
          winBGM = this.sound.add("winBGM", { volume: 0.3, loop: false });
          menuBG = this.add
            .image(0, 0, "lmenubg")
            .setOrigin(0, 0)
            .setScale(0.5);
          bgwin = this.add.image(0, 0, "bgwin").setOrigin(0, 0).setScale(0.5);
          winBGM.play();
          lhome = this.add
            .image(800, 490, "lhome")
            .setScale(0.5)
            .setInteractive()
            .on("pointerover", () => {
              lhome.setScale(0.55);
              adbtnhover.play();
            })
            .on("pointerout", () => {
              lhome.setScale(0.5);
            })
            .on("pointerup", () => {
              //console.log('home');
              adbtnclick.play();
              this.scene.stop("boss2_config");
              this.scene.start("home");
            });
          lrestart = this.add
            .image(900, 490, "lrestart")
            .setScale(0.5)
            .setScale(0.5)
            .setInteractive()
            .on("pointerover", () => {
              adbtnhover.play();
              lrestart.setScale(0.55);
            })
            .on("pointerout", () => {
              lrestart.setScale(0.5);
            })
            .on("pointerup", () => {
              adbtnclick.play();
              this.scene.stop("boss2_config");
              this.scene.start("scene1");
            });
        },
      };
      const winboss_config = {
        key: "winboss_config",
        type: Phaser.AUTO,
        active: false,
        visible: false,
        backgroundColor: "#ffffff",
        width: 960,
        height: 540,
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
        },
        preload: function () {
          this.load.image("wbmenubg", "./_img/BGMenu.PNG");
          this.load.image("wbbgwin", "./_img/BGWin.PNG");
        },
        create: function () {
          this.add.image(0, 0, "wbmenubg").setOrigin(0, 0).setScale(0.5);
          this.add.image(0, 0, "wbbgwin").setOrigin(0, 0).setScale(0.5);
          this.sound.add("winBGM", { volume: 0.5, loop: false }).play();
          round2 = this.add
            .image(config.width / 2, config.height / 2, "round2")
            .setScale(0);
          round2.setVisible(false);
          this.time.addEvent({
            loop: false,
            delay: 2000,
            callback: function () {
              round2.setVisible(true);
              round2.scene.tweens.add({
                targets: round2,
                scaleX: 0.5,
                scaleY: 0.5,
                ease: "Linear",
                duration: 2000,
                repeat: 0,
                yoyo: false,
                onStart: () => {
                  round.play();
                },
                onComplete: () => {
                  this.scene.stop("winboss_config");
                  this.scene.start("scene2");
                  isStart = true;
                },
              });
            },
            callbackScope: this,
          });
        },
      };
      const config = {
        key: "config",
        type: Phaser.AUTO,
        width: 960,
        height: 540,
        scale: {
          mode: Phaser.Scale.FIT,
          autoCenter: Phaser.Scale.CENTER_BOTH,
        },
        scene: [
          home_config,
          scene1_config,
          scene2_config,
          boss1_config,
          boss2_config,
          lose_config,
          win_config,
          pause_config,
          winboss_config,
        ],
      };
      const game = new Phaser.Game(config);
      function colleDrop(p, d) {
        pick.play();
        drop_num++;
        show_dropnum.setText(drop_num);
        d.destroy();
      }
      function colleMask(p, m) {
        pick.play();
        mask_num++;
        show_masknum.setText(mask_num);
        m.destroy();
      }
      function colleBox(p, b) {
        pick.play();
        let tmp = Phaser.Math.Between(0, 3);
        //console.log(tmp);
        b.destroy();
        bonus[tmp].setVisible(true);
        bonus[tmp].scene.tweens.add({
          targets: bonus[tmp],
          scaleX: 0.5,
          scaleY: 0.5,
          ease: "Linear",
          duration: 2000,
          repeat: 0,
          yoyo: true,
        });
        switch (tmp) {
          case 0:
            Pbonus.play();
            drop_num += 5;
            show_dropnum.setText(drop_num);
            break;

          case 1:
            Pbonus.play();
            mask_num += 5;
            show_masknum.setText(mask_num);
            break;

          case 2:
            Nbonus.play();
            drop_num -= 5;
            show_dropnum.setText(drop_num);
            break;
          case 3:
            Nbonus.play();
            mask_num -= 5;
            show_masknum.setText(mask_num);
            break;
        }
      }
      function colleGasmask(p, g) {
        pick.play();
        g.destroy();
        gasmask_num++;
        show_gasmasknum.setText(gasmask_num);
      }
      function maskhitMobs1(m, M) {
        mobsbehit.play();
        M.disableBody(true, true);
        mobs1B.disableBody(true, true);
        mobs1B.setVisible(false);
        m.setVisible(false);
        drop_num += 2;
        show_dropnum.setText(drop_num);
      }
      function maskhitMobs2(m, M) {
        mobsbehit.play();
        M.disableBody(true, true);
        mobs2B.disableBody(true, true);
        mobs2B.setVisible(false);
        m.setVisible(false);
        drop_num += 2;
        show_dropnum.setText(drop_num);
      }
      function maskhitMobs3(m, M) {
        mobsbehit.play();
        M.disableBody(true, true);
        mobs3B.disableBody(true, true);
        mobs3B.setVisible(false);
        m.setVisible(false);
        drop_num += 2;
        show_dropnum.setText(drop_num);
      }
      function hittedMobs(p, b) {
        playerbehit.play();
        b.disableBody(true, true);
        blood_num -= 2;
        show_bloodnum.setText(blood_num);
      }

      function showTime() {
        time--;
        show_time.setText(time + "s");
        if (time == 10) {
          count.play();
          sceneBGM.pause();
        }
        if (this.scene.isActive("scene1") && time == 0) {
          sceneBGM.pause();
          if (drop_num < 25) {
            this.scene.stop("scene1");
            this.scene.start("lose_config");
          } else {
            boss1.setVisible(true);
            boss1.scene.tweens.add({
              targets: boss1,
              scaleX: 0.5,
              scaleY: 0.5,
              ease: "Linear",
              duration: 2000,
              repeat: 0,
              yoyo: false,
              onStart: () => {
                warn.play();
              },
              onComplete: () => {
                this.scene.stop("scene1");
                this.scene.start("boss1_config");
              },
            });
          }
        }
        if (this.scene.isActive("scene2") && time == 0) {
          sceneBGM.pause();
          warn.play();
          boss2.setVisible(true);
          boss2.scene.tweens.add({
            targets: boss2,
            scaleX: 0.5,
            scaleY: 0.5,
            ease: "Linear",
            duration: 2000,
            repeat: 0,
            yoyo: false,
            onComplete: () => {
              this.scene.stop("scene2");
              this.scene.start("boss2_config");
            },
          });
        }
      }
      function newItem() {
        for (let i = 0; i < 10; i++) {
          drop
            .create(
              Phaser.Math.Between(0, 3800),
              Phaser.Math.Between(0, 320),
              "drop"
            )
            .setScale(0.5);
        }
        for (let i = 0; i < 3; i++) {
          mask
            .create(
              Phaser.Math.Between(0, 3800),
              Phaser.Math.Between(0, 320),
              "mask"
            )
            .setScale(0.35);
        }
        gasmask
          .create(
            Phaser.Math.Between(0, 3800),
            Phaser.Math.Between(0, 320),
            "gasmask"
          )
          .setScale(0.4);
        if (this.scene.isActive("scene1")) {
          if (randombox.countActive() == 0) {
            randombox.create(2150, 100, "randombox").setScale(0.45);
          }
        } else if (this.scene.isActive("scene2")) {
          if (randombox.countActive() == 0) {
            randombox.create(3500, 100, "randombox").setScale(0.45);
          }
        }
      }
      function itemUse() {
        if (gasmask_num > 0) {
          ibshow_gasmask.setTint(0xffffff);
          let useGasmask = false;
          if (Phaser.Input.Keyboard.JustDown(H)) {
            useGasmask = true;
            blood_num += 5;
            heal.play();
            show_bloodnum.setText(blood_num);
            gasmask_num--;
            show_gasmasknum.setText(gasmask_num);
            useGasmask = false;
          }
        } else {
          ibshow_gasmask.setTint(0x000000);
        }

        if (drop_num >= 80) {
          ibshow_alcohol.setTexture("alcohol3");
        } else if (drop_num >= 50) {
          ibshow_alcohol.setTexture("alcohol2");
        } else if (drop_num >= 25) {
          ibshow_alcohol.setTexture("alcohol1");
          ibshow_alcohol.setTint(0xffffff);
        }

        if (mask_num > 0) {
          ibshow_mask.setTint(0xffffff);
          if (Phaser.Input.Keyboard.JustDown(G)) {
            if (!isMaskBOut) {
              playermask.play();
              mask_num--;
              show_masknum.setText(mask_num);
              isMaskBOut = true;
              maskB.x = player.x;
              maskB.y = player.y;
              if (isLeft) {
                maskB.setVisible(true);
                maskB.scene.tweens.add({
                  targets: maskB,
                  props: {
                    x: { value: "-=400", duration: 1000, ease: "Linear" },
                    angle: {
                      value: "-1080",
                      duration: 1000,
                      ease: "Linear",
                      repeat: 0,
                    },
                  },
                  duration: 3000,
                  repeat: 0,
                  yoyo: false,
                  onComplete: () => {
                    maskB.x = player.x;
                    maskB.y = player.y;
                    maskB.setVisible(false);
                    isMaskBOut = false;
                  },
                });
              } else {
                maskB.setVisible(true);
                maskB.scene.tweens.add({
                  targets: maskB,
                  props: {
                    x: { value: "+=400", duration: 1000, ease: "Linear" },
                    angle: {
                      value: "-1080",
                      duration: 1000,
                      ease: "Linear",
                      repeat: 0,
                    },
                  },
                  duration: 3000,
                  repeat: 0,
                  yoyo: false,
                  onComplete: () => {
                    maskB.x = player.x;
                    maskB.y = player.y;
                    maskB.setVisible(false);
                    isMaskBOut = false;
                  },
                });
              }
            }
          }
        } else {
          ibshow_mask.setTint(0x000000);
        }
      }
      function mobsAttack() {
        if (isMobs1Left) {
          if (mobs1.active) {
            if (!mobs1B.active) {
              mobs1B.enableBody(false, true);
            }
            mobs1B.x = mobs1.x;
            mobs1B.y = mobs1.y - 20;
            mobs1B.setVisible(true);
            mobs1B.flipX = true;
            mobs1B.scene.tweens.add({
              targets: mobs1B,
              props: {
                x: { value: "-=400", duration: 1000, ease: "Linear" },
              },
              duration: 1000,
              repeat: 0,
              yoyo: false,
              onComplete: () => {
                mobs1B.x = mobs1.x;
                mobs1B.y = mobs1.y - 20;
                mobs1B.setVisible(false);
              },
            });
          }
        } else {
          if (mobs1.active) {
            if (!mobs1B.active) {
              mobs1B.enableBody(true, false);
            }
            mobs1B.x = mobs1.x;
            mobs1B.y = mobs1.y - 20;
            mobs1B.setVisible(true);
            mobs1B.flipX = false;
            mobs1B.scene.tweens.add({
              targets: mobs1B,
              props: {
                x: { value: "+=400", duration: 1000, ease: "Linear" },
              },
              duration: 1000,
              repeat: 0,
              yoyo: false,
              onComplete: () => {
                mobs1B.x = mobs1.x;
                mobs1B.y = mobs1.y - 20;
                mobs1B.setVisible(false);
              },
            });
          }
        }

        if (isMobs2Left) {
          if (mobs2.active) {
            if (!mobs2B.active) {
              mobs2B.enableBody(true, false);
            }
            mobs2B.x = mobs2.x;
            mobs2B.y = mobs2.y - 20;
            mobs2B.setVisible(true);
            mobs2B.flipX = true;
            mobs2B.scene.tweens.add({
              targets: mobs2B,
              props: {
                x: { value: "-=400", duration: 1000, ease: "Linear" },
              },
              duration: 1000,
              repeat: 0,
              yoyo: false,
              onComplete: () => {
                mobs2B.x = mobs2.x;
                mobs2B.y = mobs2.y - 20;
                mobs2B.setVisible(false);
              },
            });
          }
        } else {
          if (mobs2.active) {
            if (!mobs2B.active) {
              mobs2B.enableBody(true, false);
            }
            mobs2B.x = mobs2.x;
            mobs2B.y = mobs2.y - 20;
            mobs2B.setVisible(true);
            mobs2B.flipX = false;
            mobs2B.scene.tweens.add({
              targets: mobs2B,
              props: {
                x: { value: "+=400", duration: 1000, ease: "Linear" },
              },
              duration: 1000,
              repeat: 0,
              yoyo: false,
              onComplete: () => {
                mobs2B.x = mobs2.x;
                mobs2B.y = mobs2.y - 20;
                mobs2B.setVisible(false);
              },
            });
          }
        }

        if (isMobs3Left) {
          if (mobs3.active) {
            if (!mobs3B.active) {
              mobs3B.enableBody(true, false);
            }
            mobs3B.x = mobs3.x;
            mobs3B.y = mobs3.y - 20;
            mobs3B.setVisible(true);
            mobs3B.flipX = true;
            mobs3B.scene.tweens.add({
              targets: mobs3B,
              props: {
                x: { value: "-=400", duration: 1000, ease: "Linear" },
              },
              duration: 1000,
              repeat: 0,
              yoyo: false,
              onComplete: () => {
                mobs3B.x = mobs3.x;
                mobs3B.y = mobs3.y - 20;
                mobs3B.setVisible(false);
              },
            });
          }
        } else {
          if (mobs3.active) {
            if (!mobs3B.active) {
              mobs3B.enableBody(true, false);
            }
            mobs3B.x = mobs3.x;
            mobs3B.y = mobs3.y - 20;
            mobs3B.setVisible(true);
            mobs3B.flipX = false;
            mobs3B.scene.tweens.add({
              targets: mobs3B,
              props: {
                x: { value: "+=400", duration: 1000, ease: "Linear" },
              },
              duration: 1000,
              repeat: 0,
              yoyo: false,
              onComplete: () => {
                mobs3B.x = mobs3.x;
                mobs3B.y = mobs3.y - 20;
                mobs3B.setVisible(false);
              },
            });
          }
        }
      }
      function hittedBigBoss1(p, b1) {
        //playerbehit.play();
        blood_num -= 2;
        show_bloodnum.setText(blood_num);
      }

      function hittedland1(p, L1) {
        //playerbehit.play();
        blood_num -= 2;
        show_bloodnum.setText(blood_num);
        land1.disableBody(true, true);
        bomb1.setVisible(true);
        bomb1.anims.play("bomb1", true);
        // bomb.disableBody(true, true);
      }

      function hittedland2(p, L1_2) {
        //playerbehit.play();
        blood_num -= 2;
        show_bloodnum.setText(blood_num);
        land2.disableBody(true, true);
        bomb2.setVisible(true);
        bomb2.anims.play("bomb2", true);
        // bomb.disableBody(true, true);
      }
      function hittedBossP(a, hit) {
        //playerbehit.play();
        BossBlood_num -= damage;
        show_BossBloodnum.setText(BossBlood_num);
        alcoB.disableBody(true, true);
      }

      function boss1Time() {
        time--;
        show_time.setText(time + "s");
        if (time == 0 && boss1alive == true) {
          this.scene.stop("boss1_config");
          this.scene.start("lose_config");
        } else if (time <= 0 && boss1alive == false) {
          this.scene.stop("boss1_config");
          this.scene.start("winboss_config");
        }
      }
    </script>
  </body>
</html>
